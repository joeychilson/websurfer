# Default settings applied to all requests unless overridden by site-specific configs
default:
  # Cache configuration
  cache:
    ttl: 1h
    stale_time: 24h
  # Fetch configuration
  fetch:
    user_agent: "websurfer/1.0 (webpage retriever; +https://github.com/joeychilson/websurfer)"
    timeout: 30s
    respect_robots_txt: true
    robots_txt_cache_ttl: 24h
    sitemap_cache_ttl: 1h
    follow_redirects: true
    enable_ssrf_protection: true
    max_redirects: 10
  # Rate limiting to be respectful to servers
  rate_limit:
    requests_per_second: 10.0
    burst: 10
    respect_retry_after: true
  # Retry configuration for transient failures
  retry:
    max_retries: 3
    initial_delay: 1s
    max_delay: 30s
  # Chunking configuration for search indexing
  chunk:
    tokens: 600
    overlap: 75

sites:
  # Wikipedia - Crawl for search indexing
  - pattern: "en.wikipedia.org"
    crawl:
      strategy: "sitemap"
      # No max_pages or max_depth - crawl everything from sitemap
    cache:
      ttl: 12h
      stale_time: 168h
    fetch:
      user_agent: "websurfer/1.0 contact@websurfer.dev"
      timeout: 45s
    rate_limit:
      requests_per_second: 5.0
      burst: 10

  # Python Documentation - Crawl with custom chunking
  - pattern: "docs.python.org"
    crawl:
      strategy: "both"  # Use both sitemap and link crawling
      max_pages: 5000
      max_depth: 3
    chunk:
      tokens: 800  # Larger chunks for technical docs
      overlap: 100
    cache:
      ttl: 24h
      stale_time: 72h
    fetch:
      check_formats:
        - "/llms.txt"
        - ".md"

  # SEC.gov EDGAR - Fetch only, don't crawl/index
  # https://www.sec.gov/search-filings/edgar-search-assistance/accessing-edgar-data
  - pattern: "*.sec.gov"
    # No crawl config = not indexed for search
    cache:
      ttl: 24h
      stale_time: 168h
    fetch:
      user_agent: "websurfer/1.0 contact@websurfer.dev"
      timeout: 60s
    rate_limit:
      requests_per_second: 10.0
      burst: 10
      respect_retry_after: true
    retry:
      max_retries: 5
      initial_delay: 2s
      max_delay: 60s
